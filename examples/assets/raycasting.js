import{c4 as h,c5 as g,c6 as k,c7 as I,c8 as L,c9 as v,ca as C,bS as S,cg as x,bR as m,ch as E,ci as M,cj as R,ck as B,cb as G,cc as p,cd as u,ce as A,cl as P}from"./index-B2CFg0Uj.js";import"./pako.esm-DwGzBETv.js";const o=new h,F=o.get(g),t=F.create();t.scene=new k(o);t.scene.setup();t.scene.three.background=null;const d=document.getElementById("container");t.renderer=new I(o,d);t.camera=new L(o);t.camera.controls.setLookAt(80,25,-52,11,-9.5,-3);o.init();const U=o.get(v);U.create(t);const V="../../src/multithreading/fragments-thread.ts",s=new C(V);t.camera.controls.addEventListener("rest",()=>s.update(!0));s.models.list.onItemSet.add(({value:e})=>{e.useCamera(t.camera.three),t.scene.three.add(e.object),s.update(!0)});const _=await fetch("/resources/frags/medium_test.frag"),j=await _.arrayBuffer(),b=await s.load(j,{modelId:"example"}),T=await b.getItemsOfCategory("IFCSPACE"),X=(await Promise.all(T.map(e=>e.getLocalId()))).filter(e=>typeof e<"u");await b.setVisible(X,!1);s.update(!0);const a=new S;let w=e=>{};d.addEventListener("mousemove",async e=>{a.x=e.clientX,a.y=e.clientY;const n=await s.raycast({camera:t.camera.three,mouse:a,dom:t.renderer.three.domElement});w(n)});const Y=new x().setFromPoints([new m(0,0,0),new m(0,0,2)]),z=new E({color:"#6528d7"}),i=new M(Y,z);t.scene.three.add(i);w=e=>{if(i.visible=!!e,!e)return;console.log(e);const{point:n,normal:c}=e;if(!c)return;i.position.copy(n);const y=n.clone().add(c);i.lookAt(y)};let f=e=>{};d.addEventListener("click",async e=>{a.x=e.clientX,a.y=e.clientY;const n=await s.raycast({camera:t.camera.three,mouse:a,dom:t.renderer.three.domElement});f(n)});const H=new R(.4),O=new B({color:"#bcf124",transparent:!0,opacity:.8});f=e=>{if(!e)return;const{point:n}=e,c=new P(H,O);c.position.copy(n),t.scene.three.add(c)};G.init();const l=p.create(()=>u`
    <bim-panel id="controls-panel" active label="Raycasting" class="options-menu">
      <bim-panel-section fixed label="Info">
        <bim-label style="white-space: normal;">ðŸ’¡ To better experience this tutorial, open your browser console to see the data logs.</bim-label>
      </bim-panel-section>
    </bim-panel>
  `);document.body.append(l);const W=p.create(()=>u`
    <bim-button class="phone-menu-toggler" icon="solar:settings-bold"
      @click=${()=>{l.classList.contains("options-menu-visible")?l.classList.remove("options-menu-visible"):l.classList.add("options-menu-visible")}}>
    </bim-button>
  `);document.body.append(W);const r=new A;r.showPanel(2);document.body.append(r.dom);r.dom.style.left="0px";r.dom.style.zIndex="unset";t.renderer.onBeforeUpdate.add(()=>r.begin());t.renderer.onAfterUpdate.add(()=>r.end());
